Unbreakable Rules:

- Files always have a blank line at the end
- Always write tests that test behavior, not the implementation
- Never mock in tests
- Small, pure, functions whenever possible
- Immutable values whenever possible
- Never take a shortcut
- Ultra think through problems before taking the hacky solution
- Use real schemas/types in tests, never redefine them

Working Style:

- Be persistent and autonomous; keep going until the task is fully done
- Explore the codebase quickly using targeted search before editing
- Prefer `apply_patch` for small, precise edits
- Batch file reads when possible to reduce round trips
- Skip long preambles; jump straight into action and results
